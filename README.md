# Развертывание Discord-бота с Lavalink на Koyeb

Этот репозиторий содержит код Discord-бота на Python и конфигурацию сервера Lavalink. Ниже описано, как бесплатно запустить оба сервиса на платформе [Koyeb](https://www.koyeb.com/), которая позволяет держать до двух контейнеров 24/7 на бесплатном тарифе.

## 1. Подготовка репозитория
1. Форкните этот репозиторий или склонируйте его в свой аккаунт GitHub.
2. В файле `.env` должны быть заданы переменные `DISCORD_BOT_TOKEN`, `OPENAI_API_KEY`, `LAVALINK_PASSWORD` и при необходимости `LAVALINK_URI`.

## 2. Развёртывание в Koyeb
1. Зарегистрируйтесь на сайте Koyeb и подключите свой GitHub-аккаунт.
2. Нажмите **Create App** и выберите этот репозиторий. В качестве сборки используйте `Dockerfile` из корня для бота.
3. В настройках приложения добавьте переменные окружения из `.env`.
4. Создайте вторую службу и укажите путь `lavalink` из репозитория — там уже лежит `Dockerfile` для сервера Lavalink. Для неё задайте переменную `LAVALINK_PASSWORD`.
5. После запуска Lavalink откройте его вкладку **Domains** и скопируйте адрес вида `https://<имя>.koyeb.app`. Этот адрес (с портом `2333`) укажите в `LAVALINK_URI` у бота, например `http://<имя>.koyeb.app:2333`.

## 3. Запуск
1. Для сервиса бота команда запуска по умолчанию уже задана в `Dockerfile`: `python bot.py`.
2. Нажмите **Deploy** для обеих служб. Как только статус станет `running`, бот подключится к Discord.
3. Пригласите бота на свой сервер Discord, используя ссылку вида `https://discord.com/api/oauth2/authorize?client_id=<ID>&permissions=8&scope=bot%20applications.commands`.

## 4. Использование
Бот поддерживает команды `/meme`, `/khata`, `/askgpt` и управление музыкой (`/play`, `/pause`, `/resume`, `/next`, `/leave`).

## 5. Примечания
- Бесплатный тариф Koyeb позволяет держать две службы с 512 MB памяти без оплаты. Этого достаточно, чтобы бот и Lavalink работали постоянно.
- Храните токены OpenAI и Discord только в переменных окружения и не публикуйте их.
